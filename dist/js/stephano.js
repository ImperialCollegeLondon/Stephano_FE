var Stephano=function(){var e="",t=function(){this.setHeader(),this.modules={},this.subset=[];var t=this.parseQuery();e=t.dataset,e?this.selectDataset(e):this.openSelectDatasetDialog(),$("#west").resizable({resize:this.setSizesFromWest,maxHeight:this.getMaxPanelHeight(),maxWidth:this.getMaxPanelWidth()}),$("#east").resizable({handles:"s",resize:this.setSizesFromEast,maxHeight:this.getMaxPanelHeight(),maxWidth:this.getMaxPanelWidth()}),$(window).on("resize",function(e,t){e.target==window&&this.setSizesFromWest.call(this,e,t)}.bind(this)),$(document.body).on("subset",function(e){this.subset=e.nodeIds}.bind(this)),$(document.body).on("unsubset",function(){this.subset=[]}.bind(this))};return t.prototype.loadConfig=function(){$.getJSON(this.configURL,{},this.loadConfigCallback.bind(this))},t.prototype.loadConfigCallback=function(e){this.config=e,this.loadPlugins()},t.prototype.addElementWithText=function(e,t,s){var a=document.createElement(t);return a.appendChild(document.createTextNode(s)),e.appendChild(a),a},t.prototype.emptyElement=function(e){for(;e.hasChildNodes();)e.removeChild(e.childNodes[0])},t.prototype.parseQuery=function(){for(var e,t=location.search.substr(1),s=t.split("&"),a={},i=0;i<s.length;i++)e=s[i].split("="),a[e[0]]=e[1];return a},t.prototype.setHeader=function(){var e=$(".header")[0];this.emptyElement(e),this.addElementWithText(e,"h1","Stephano");var t=this.addElementWithText(e,"button","Dataset : "),s=this.addElementWithText(t,"span","Please select");t.id="btn_select_dataset",t.type="button",s.className="dataset_name",t.appendChild(s),t.addEventListener("click",this.openSelectDatasetDialog.bind(this)),this.dataset_button=t},t.prototype.loadPlugins=function(){$(".panel, .tab-list").remove(),$(".tabs").removeClass("tabs");for(var e in this.config)this.loadPanel(e,this.config[e])},t.prototype.loadPanel=function(e,t){var e=$("#"+e);1===t.length?this.modules[t[0].id]=this.loadPlugin(e,t[0],this):this.createTabs(e,t)},t.prototype.createTabs=function(e,t){e.addClass("tabs"),e.append('<div class="tab-list"></div>');for(var s=0;s<t.length;s++)this.modules[t[s].id]=this.loadPlugin(e,t[s],this);$(".tab-list .tab:first",e).click()},t.prototype.addTab=function(e,t){$(".tab-list",e).append('<button type="button" class="tab" id="tab-'+t.id+'" tab-id="'+t.id+'">'+t.name+"</button>"),$("#tab-"+t.id,e).on("click",this.openTab_Handler)},t.prototype.getMaxPanelHeight=function(){return $(".main").height()-50},t.prototype.getMaxPanelWidth=function(){return $(".main").width()-50},t.prototype.openTab_Handler=function(){var e=$(this),t=$(this).attr("tab-id");$(".active",e.parent().parent()).removeClass("active"),e.addClass("active"),$("#"+t).addClass("active")},t.prototype.openSelectDatasetDialog=function(){$.getJSON("/api/datasets",this.loadDatasetCallback.bind(this))},t.prototype.loadDatasetCallback=function(e){var t=$("#dataset_selector"),s=$("div",t);$("button",s).remove();for(var a=0;a<e.length;a++)s.append('<button id="'+e[a]+'" type="button" class="dataset">'+e[a]+"</button>"),$("button",s).click(this.selectDatasetCallback.bind(this));t.show()},t.prototype.selectDatasetCallback=function(e){this.selectDataset(e.target.id)},t.prototype.selectDataset=function(e){this.configURL="/api/"+e+"/config",this.loadConfig(),$(".dataset_name").text(e),$("#dataset_selector").hide()},t.prototype.addPluginContainer=function(e,t){e.append('<div id="'+t.id+'" title="'+t.name+'" style="height:100%;" class="panel"></div>')},t.prototype.loadPlugin=function(e,t){this.addPluginContainer(e,t),e.hasClass("tabs")&&this.addTab(e,t);var s=Stephano.Plugins[t.type],a=new s($("#"+t.id),t,app);return a},t.prototype.setSizesFromWest=function(){var e=$(".main").width(),t=$(".main").height(),s=$("#west"),a=$("#east"),i=$("#south");a.width(e-s.outerWidth()),a.height(s.innerHeight()-20);var o=i.innerHeight()-i.height();i.height(t-a.outerHeight()-o-6),$("#west, #east, #south").trigger("stephano_resize",{})},t.prototype.setSizesFromEast=function(){var e=$(".main").height(),t=$("#west"),s=$("#east"),a=$("#south");t.height(s.innerHeight()-20);var i=a.innerHeight()-a.height();a.height(e-t.outerHeight()-i-6),$("#west, #east, #south").trigger("stephano_resize",{})},t.prototype.popupImageGrid=function(){$(document.body).append('<canvas id="image_grid" class="popup popped" style="background:white;width:300px;height:300px;" width="300" height="300"></canvas>');var e=$("#image_grid")[0].getContext("2d");e.restore(),this.modules.labels.getImageGrid(e)},{App:t,Plugins:{},COLOURS:["rgba(255,0,0,1)","rgba(0,128,0,1)","rgba(192,192,192,1)","rgba(255,255,0,1)","rgba(255,255,255,1)","rgba(128,0,128,1)","rgba(128,128,128,1)","rgba(128,0,0,1)","rgba(0,0,204,1)","rgba(159,255,159,1)","rgba(255,157,206,1)","rgba(179,102,255,1)"],SHAPES:["circle","square","triangle","star"],MAP_SHAPES:["o","s","t","x"]}}();$(function(){var e=new Stephano.App;window.app=e}),Stephano.Plugins.labeler=function(e,t){this.jqele=$(e),this.jqele.addClass("labeler"),this.conf=t,this.load(t.datasource)},Stephano.Plugins.labeler.prototype.load=function(e){e.match(/^https?:/)||(e="//"+location.host+e);$.getJSON(e,this.drawControls.bind(this)),$(document.body).on("unsubset",$.proxy(function(){this.cur_label&&this.relabel(this.cur_label)},this))},Stephano.Plugins.labeler.prototype.drawControls=function(e){this.fields={};var t,s,a,i=this.jqele;i.append('<div class="row-fluid"><div class="group colour"><h4>Colour by: This will colour points on the map and also tree nodes.</h4><div class="General"></div></div><div class="group labels"><h4>Labels:  This will display text next to nodes on tree</h4><div class="General"></div></div></div>'),t=$(".colour",i),s=$(".labels",i);for(var o in e){var r=o.replace(/[\s\/\\]/gi,"_");"General"!=o&&(t.append('<div class="'+r+'"><h5>'+o+"</h5></div>"),s.append('<div class="'+r+'"><h5>'+o+"</h5></div>")),a=e[o];for(var n=0;n<a.length;n++)this.fields[a[n].name]=a[n],"label"==a[n].type?$("."+r,s).append('<button class="btn '+(a[n].name==this.conf.colourField?"selected":"")+'" id="'+a[n].name+'" gismoh-label_type="'+a[n].type+'">'+a[n].label+(a[n].name==this.conf.colourField?'<div class="icon-map-marker icon-white pull-right"></div>':"")+"</button>"):$("."+r,t).append('<button class="btn '+(a[n].name==this.conf.colourField?"selected":"")+'" id="'+a[n].name+'"  gismoh-label_type="'+a[n].type+'">'+a[n].label+(a[n].name==this.conf.colourField?'<div class="icon-map-marker icon-white pull-right"></div>':"")+"</button>");$("."+r+" button",s).length||$("."+r,s).remove(),$("."+r+" button",t).length||$("."+r,t).remove()}$("button",i).click(this.clickHandler.bind(this)),this.relabel({type:"colour",name:"Country",label:"Country"})},Stephano.Plugins.labeler.prototype.clickHandler=function(e){var t=e.target.id,s=e.target.getAttribute("gismoh-label_type");obj=this.fields[t],obj.type=s,btn=$(e.target),$(".selected",btn.parents(".group")).removeClass("selected"),btn.addClass("selected"),this.relabel(obj)},Stephano.Plugins.labeler.prototype.relabel=function(e){{var t=this,s=this.conf.urlbase;this.dataset}if(this.cur_label=e,s.match(/^https?:/)||(s="//"+location.host+s+e.name),"label"==e.type)$.getJSON(s,function(s){"object"!=typeof s&&(s=JSON.parse(s));var a=$("#"+t.jqele.attr("id")+" .icon-tag"),i=a.parent();a.remove(),$("div",i).length||i.removeClass("btn-primary"),$(document.body).trigger({type:"relabel",stuff:s,field:e.name}),$("#"+t.jqele.attr("id")+"_"+e.name).addClass("btn-primary").append('<div class="icon-tag icon-white pull-right"></div>')});else if("colour"==e.type){var a=$("#"+t.jqele.attr("id")+" .icon-map-marker"),i=a.parent();a.remove(),$("div",i).length||i.removeClass("btn-primary"),$.getJSON(s,function(e){"object"!=typeof e&&(e=JSON.parse(e));var s=Stephano.COLOURS.length,a=Stephano.SHAPES.length,i=0;for(var o in e)if(""!=o){var r=Stephano.COLOURS[i%s],n=Stephano.SHAPES[Math.round(i/s)%a],l=Stephano.MAP_SHAPES[Math.round(i/s)%a];t.jqele.trigger({type:"colour",ids:e[o],colour:r,shape:n,map_shape:l}),i++}}),$("#"+t.jqele.attr("id")+"_"+e.name).addClass("btn-primary").append('<div class="icon-map-marker icon-white pull-right"></div>')}else if("binary"==e.type){var a=$("#"+t.jqele.attr("id")+" .icon-map-marker"),i=a.parent();a.remove(),$("div",i).length||i.removeClass("btn-primary"),$.getJSON(s,function(t){"object"!=typeof t&&(t=JSON.parse(t));var s={positive:{colour:"rgba(255, 47, 43, 1)",shape:"circle",map_shape:"o"},negative:{colour:"rgba(16, 238,0, 1)",shape:"circle",map_shape:"o"},other:{colour:"rgba(100, 100, 100, 1)",shape:"circle",map_shape:"o"},both:{colour:"rgba(255, 255, 0, 1)",shape:"circle",map_shape:"o"}};for(var a in t){var i;""!=a&&(i="1"==a?"positive":"negative",$(document.body).trigger({type:"colour",ids:t[a],colour:s[i].colour,shape:s[i].shape,map_shape:s[i].map_shape,field:e.name,pos_neg:i,colour_list:s}))}}),$("#"+t.jqele.attr("id")+"_"+e.name).addClass("btn-primary").append('<div class="icon-map-marker icon-white pull-right"></div>')}else"hg"==e.type},Stephano.Plugins.labeler.prototype.getImageGrid=function(e){for(var t=["rgba(255, 47, 43, 1)","rgba(16, 238,0, 1)","rgba(100, 100, 100, 1)","rgba(255, 255, 0, 1)"],s=Stephano.MAP_SHAPES,a=0;a<s.length;a++)for(var i=0;i<t.length;i++){var o=new Image;o.top=13*a,o.left=18*i,o.onload=function(){e.drawImage(this,this.top,this.left,15,22)},o.src="/markers/point?shape="+s[a]+"&colour="+t[i]}},Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Stephano.Plugins.PhyloCanvas=function(){var e=function(e,t){if(!$)return void alert("JQuery not detected");if(this.div=e,!window.PhyloCanvas||!PhyloCanvas.Tree)return void $(e).text("PhyloCanvas not available");e.html('<div style="position:absolute;bottom:3em;height:1em;left:0;padding:0.2em;z-index:100;">Node size :   <div id="ns_slider" style="display: inline-block;width:18em;"></div></div><div style="position:absolute;bottom:1.5em;height:1em;left:0;padding:0.2em;z-index:100;">  Label size : <div id="ls_slider" style="display: inline-block;width:18em;"></div> </div><div class="pc-toolbar"><button type="button" class="reset btn">Redraw original tree</button><button type="button" class="labels btn" name="labels" >Show Labels</button><div class="btn-group"><button type="button" class="btn dropdown-toggle" data-toggle="dropdown">Tree Type </button><ul class="dropdown-menu"><li><a class="rect" href="javascript:void(0);">Rectangular</a></li><li><a class="circ" href="javascript:void(0);">Circular</a></li><li><a class="rad" href="javascript:void(0);">Radial</a></li></ul></div></div>'),this.phylo=new PhyloCanvas.Tree(e[0],{history_collapsed:!0});var s=this.phylo;s.navigator=!1,s.history_collapsed=!0,s.backcolour=!0,s.load(t.datasource),e.parent().on("stephano_resize",this.resize_handler.bind(this)),$("#ns_slider").slider({min:0,max:20,step:.1,slide:function(e,t){s.setNodeSize(t.value)},value:1}),$("#ls_slider").slider({min:6,max:32,step:.1,slide:function(e,t){s.setTextSize(t.value)},value:10}),t.treeType?(this.phylo.treeType=t.treeType,"radial"==t.treeType?$(".rad").addClass("selected"):"circular"==t.treeType?$(".circ").addClass("selected"):"rectangular"==t.treeType&&$(".rect").addClass("selected")):(this.phylo.treeType="radial",$(".rad").addClass("selected")),this.phylo.showLabels=!1,this.phylo.baseNodeSize=1,this.phylo.selectedNodeSizeIncrease=0,this.phylo.selectedColor="rgba(255,128,50,1)",this.phylo.rightClickZoom=!0,this.phylo.addListener("selected",function(e){var t=e.nodeIds;return e.preventDefault(),e.bubbles=!1,"string"==typeof t&&(t=t.split(",")),$(document.body).trigger({type:"selected",nodeIds:t,source:"phylocanvas"}),!1}),this.phylo.addListener("subtree",function(){var e=this.phylo.root.getChildIds();"string"==typeof e&&(e=e.split(",")),$(document.body).trigger({type:"subset",nodeIds:e,source:"phylocanvas"})}.bind(this)),this.phylo.addListener("redraw_original",function(){$(document.body).trigger({type:"unsubset",source:"phylocanvas"})});var a=this;$(document.body).on("colour",function(e){a.setColourAndShape(e.ids,e.colour,e.shape)}),$(document.body).on("selected",function(e){e.target==document.body&&"phylocanvas"!=e.source&&a.phylo.selectNodes(e.nodeIds)}),$(document.body).on("relabel",function(e){var t=e.stuff;Object.keys(t).forEach(function(e){"vals"!==e&&Array.isArray(e)&&e.forEach(function(e){var t=a.phylo.branches[e];t&&(t.label=e)})}),a.phylo.displayLabels(),a.phylo.draw()}),$(".rect",e).click(function(e){a.phylo.setTreeType("rectangular"),$(".button").removeClass("selected"),$(".rect").addClass("selected"),$(e.target).parents("ul").removeClass("expanded")}.bind(this)),$(".circ",e).click(function(e){a.phylo.setTreeType("circular"),$(".button").removeClass("selected"),$(".circ").addClass("selected"),$(e.target).parents("ul").removeClass("expanded")}),$(".rad",e).click(function(e){a.phylo.setTreeType("radial"),$(".button").removeClass("selected"),$(".rad").addClass("selected"),$(e.target).parents("ul").removeClass("expanded")}),$(".reset",e).click(function(){a.phylo.redrawOriginalTree()}),$(".labels.btn").text(s.showLabels?"Hide Labels":"Show Labels"),$(".labels.btn").click(function(){s.showLabels?($(".labels.btn").text("Show Labels"),s.hideLabels()):($(".labels.btn").text("Hide Labels"),s.displayLabels())}),$(".btn-group [data-toggle=dropdown]").click(this.dropdownToggle.bind(this)),this.resize_handler()};return e.prototype.resize_handler=function(){var e=this.div.parent();this.phylo.setSize(e.innerWidth()-4,e.innerHeight()-4)},e.prototype.load=function(e){this.phylo.load(e,"tree","newick")},e.prototype.setColourAndShape=function(e,t,s){this.phylo.setNodeColourAndShape(e,t,s,7)},e.prototype.dropdownToggle=function(e){var t=$(e.target).parent(),s=$("ul.dropdown-menu",t);s.toggleClass("expanded"),e.preventDefault(),e.stopPropagation(),$(document.body).one("click",function(){s.removeClass("expanded")})},e}(),Stephano.Plugins.Tabular=function(e,t,s){this.columns=[],this.jqele=$(e),this.app=s,this.jqele.addClass("tabular"),$(e).html("waiting for data"),this.load(t.datasource),$(document.body).on("selected",function(e){if(e.target!=document.body)return!1;var t=e.nodeIds;$("tbody tr",this.jqele).hide(),t.length?$("#"+t.join(", #"),this.jqele).show():this.app.subset.length?$("#"+this.app.subset.join(", #"),this.jqele).show():$("tbody tr",this.jqele).show()}.bind(this))},Stephano.Plugins.Tabular.prototype={load:function(e,t){e&&(this.baseURL=e);var s={};t&&(s.nids=t.join(",")),$.ajax({url:e,data:s,success:function(e){this.jqele.empty();var t=e;t.message?this.jqele.append("<p>"+t.message+"</p>"):this.drawTable(this.jqele,t)},context:this})},drawHeaders:function(e,t){var s="<tr><th>";for(var a in t)this.columns.push(a),s=s+a+"</th><th>";s=s.substring(0,s.length-4)+"</tr>",$("thead",e).append(s)},drawrow:function(e,t){var s='<tr id="'+t.Isolate+'"><td>';for(var a in t)t[a]&&"None"!=t[a]?s=s+t[a]+"</td><td>":s+="&nbsp;</td><td>";s=s.substring(0,s.length-4)+"</tr>",$("tbody",e).append(s)},drawTable:function(e,t){var s=t.length;this.jqele.css("overflow","auto"),this.jqele.append('<table class="table table-bordered table-hover"><thead></thead><tbody></tbody></table>');var a=$("table",this.jqele);this.drawHeaders(a,t[0]);for(var i=0;s>i;i++)this.drawrow(a,t[i])}},Stephano.Plugins.googlemaps=function(e,t){if(this.imagebase="plus.epicollect.net",this.superFilter=!0,!$)return void alert("JQuery not detected");if(!window.google||!google.maps)return void $(e).text("Google maps API not available");this.map=new google.maps.Map(e[0],{center:new google.maps.LatLng(0,0),zoom:1,mapTypeId:google.maps.MapTypeId.ROADMAP,overviewMapControl:!1,overviewMapControlOptions:{opened:!0}}),e.css("position","relative"),e.css("width","100%"),$("ul",e.offsetParent()).length>0&&e.css("height","91%"),this.load(t.datasource),this.markers=[],this.markerIds={},this.bubble_ids={},this.clusterer,this.iBubble=new google.maps.InfoWindow,google.maps.event.addListener(this.iBubble,"closeclick",function(){this.clearFilter()}.bind(this)),t.cluster&&(this.clusterer=new MarkerClusterer(this.map,this.markers,{maxZoom:14,gridSize:30,styles:[{url:"http://"+this.imagebase+"/markers/cluster",height:50,width:50,anchor:[24,24],textColor:"transparent",textSize:14},{url:"http://"+this.imagebase+"/markers/cluster",height:50,width:50,anchor:[24,24],textColor:"transparent",textSize:14},{url:"http://"+this.imagebase+"/markers/cluster",height:50,width:50,anchor:[24,24],textColor:"transparent",textSize:14},{url:"http://"+this.imagebase+"/markers/cluster",height:50,width:50,anchor:[24,24],textColor:"transparent",textSize:14}]}));var s=this;$(document.body).on("selected",function(e){var t=e.nodeIds;if(e.source&&"googlemaps"!=e.source){if(!t||""==t)return void s.clearFilter();var a=t.length;s.filter(function(e){if(1==t.length&&""==t[0])return!0;for(var s=a;s--;)if(-1!==e.ids.indexOf(t[s]))return!0;return!1})}}),$(document.body).on("colour",function(e){s.setColourAndShape(e.ids,e.colour,e.map_shape,e.field,e.pos_neg,e.colour_list)}),$(document.body).on("resize",function(){google.maps.event.trigger(map,"resize")}),$(document.body).on("subset",function(e){s.superFilter="object"==typeof e.nodeIds?e.nodeIds:!0,s.clearFilter()}),$(document.body).on("unsubset",function(){s.superFilter=!0,s.clearFilter()})},Stephano.Plugins.googlemaps.prototype={updateClusterer:function(){this.clusterer&&(this.clusterer.removeMarkers(this.clusterer.markers_),this.clusterer.addMarkers(this.markers))},dosuperfilter:function(e){if("function"==typeof this.superFilter)return this.superFilter(e);if("object"==typeof this.superFilter){for(var t=this.superFilter.length;t--;)if(e.ids.indexOf(this.superFilter[t])>=0)return!0;return!1}return!0},filter:function(e,t){if("function"==typeof e)for(var s=this.markers.length,a=s;a--;)this.markers[a].setVisible(e(this.markers[a])&&this.dosuperfilter(this.markers[a]));else if(t)for(var s=this.markers.length,a=s;a--;)this.markers[a].setVisible(this.markers[a][t]==e&&this.dosuperfilter(this.markers[a]))},clearFilter:function(){for(var e=this.markers.length,t=e;t--;)this.markers[t].setVisible(this.dosuperfilter(this.markers[t]))},load:function(e){$.ajax("//"+location.host+e,{success:function(e){"string"==typeof e&&(e=JSON.parse(e)),this.markers=[];for(var t=e.features,s=new google.maps.LatLngBounds,a=0;a<t.length;a++)if(t[a].geometry.coordinates){var i=t[a].geometry.coordinates,o=new google.maps.Size(13,18),r=new google.maps.Point(0,0),n={url:"/images/mapmarkers.png",size:o,origin:r};if(this.bubble_ids[i[1]+","+i[0]])this.bubble_ids[i[1]+","+i[0]].push(t[a].id),this.markerIds[t[a].properties.Isolate]=this.markerIds[this.bubble_ids[i[1]+","+i[0]][0]],this.markers[this.markerIds[t[a].properties.Isolate]].ids.push(t[a].properties.Isolate);else{this.markerIds[t[a].properties.Isolate]=this.markers.length;var l=new google.maps.LatLng(i[1],i[0]),d=new google.maps.Marker({position:l,map:this.map,id:t[a].properties.Isolate,ids:[t[a].properties.Isolate],country:t[a].country,icon:n});s.contains(l)||s.extend(l),this.markers.push(d),this.bubble_ids[i[1]+","+i[0]]=[t[a].properties.Isolate];var h=this;this.attachBubble(h,d)}}this.map.fitBounds(s),this.updateClusterer()},context:this})},attachBubble:function(e,t){google.maps.event.addListener(t,"click",function(){for(var s=(t.getPosition().lng()+","+t.getPosition().lat(),"Isolates from this location (Click to highlight on tree): <ul>"),a=t.ids.length,i=0;a>i;i++)s=s+"<li class=\"sample\"><a href=\"javascript:$(document.body).trigger({type:'selected',nodeIds:['"+t.ids[i]+"'], source : 'googlemaps'});\">"+t.ids[i]+"</a></li>";s+="</ul>",e.filterById(t.ids),e.iBubble.setContent(s),e.iBubble.setPosition(t.getPosition()),e.iBubble.open(e.map)})},setColourAndShape:function(e,t,s,a,i,o){if(e){for(var r=0;r<e.length;r++)if((this.superFilter===!0||-1!==this.superFilter.indexOf(e[r]))&&this.markers[this.markerIds[e[r]]]){var n=this.markers[this.markerIds[e[r]]],l=n.getIcon();if(l.origin=new google.maps.Point(0,0),a&&i&&o){var d=this.markers[this.markerIds[e[r]]][a];l.url="/images/mapmarker_pos_neg.png",d&&d!=i?"other"!=d&&"other"!=d&&d!=i&&(this.markers[this.markerIds[e[r]]][a]="both",l.origin=new google.maps.Point(0,54)):(this.markers[this.markerIds[e[r]]][a]=i,l.origin="positive"==i?new google.maps.Point(0,0):"negative"==i?new google.maps.Point(0,18):new google.maps.Point(0,36))}else t&&(this.markers[this.markerIds[e[r]]].colour=t),s&&(this.markers[this.markerIds[e[r]]]._shape=s),l.origin=new google.maps.Point(13*Stephano.MAP_SHAPES.indexOf(n._shape),18*Stephano.COLOURS.indexOf(n.colour)),l.url="/images/mapmarkers.png";n.setIcon(l)}this.clusterer&&this.clusterer.repaint()}}},Stephano.Plugins.googlemaps.prototype.filterById=function(e){$(document.body).trigger({type:"selected",nodeIds:e,source:"googlemaps"})},Stephano.Plugins.googlemaps.prototype.clearFilter=function(){$(document.body).trigger({type:"selected",nodeIds:[],source:"googlemaps"})};